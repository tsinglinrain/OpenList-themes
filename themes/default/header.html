<!-- OpenList Theme Header -->
<!-- 基础依赖 -->
<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=String.prototype.replaceAll"></script>

<!-- 字体引入 -->
<link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css" />

<!-- 图标字体 -->
<link type='text/css' rel="stylesheet" href="https://npm.elemecdn.com/font6pro@6.3.0/css/fontawesome.min.css" media='all'>
<link href="https://npm.elemecdn.com/font6pro@6.3.0/css/all.min.css" rel="stylesheet">

<!-- 音乐播放器依赖 -->
<link rel="stylesheet" href="https://npm.elemecdn.com/aplayer@1.10.1/dist/APlayer.min.css">
<script src="https://npm.elemecdn.com/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="https://npm.elemecdn.com/meting2@0.0.1/js/Meting.min.js"></script>

<!-- 评论系统 -->
<script src="https://giscus.app/client.js"
        data-repo="tsinglinrain/notionext_comment"
        data-repo-id="R_kgDOJHNMGA"
        data-category="Announcements"
        data-category-id="DIC_kwDOJHNMGM4CUvzD"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

<!-- 不蒜子计数器 -->
<script async src="https://busuanzi.icodeq.com/busuanzi.pure.mini.js"></script>

<!-- 确保依赖正确加载的初始化脚本 -->
<script>
(function() {
    // 确保APlayer和Meting正确加载
    function ensureMusicPlayerLoaded() {
        if (typeof APlayer === 'undefined' || typeof MetingJSElement === 'undefined') {
            console.log('正在重新加载音乐播放器依赖...');
            
            // 重新加载APlayer
            if (typeof APlayer === 'undefined') {
                const aplayerScript = document.createElement('script');
                aplayerScript.src = 'https://npm.elemecdn.com/aplayer@1.10.1/dist/APlayer.min.js';
                aplayerScript.onload = function() {
                    console.log('APlayer loaded successfully');
                    checkMetingJS();
                };
                document.head.appendChild(aplayerScript);
            } else {
                checkMetingJS();
            }
            
            function checkMetingJS() {
                if (typeof MetingJSElement === 'undefined') {
                    const metingScript = document.createElement('script');
                    metingScript.src = 'https://npm.elemecdn.com/meting2@0.0.1/js/Meting.min.js';
                    metingScript.onload = function() {
                        console.log('MetingJS loaded successfully');
                    };
                    document.head.appendChild(metingScript);
                }
            }
        }
    }
    
    // 页面加载完成后检查依赖
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', ensureMusicPlayerLoaded);
    } else {
        ensureMusicPlayerLoaded();
    }
})();
</script>

<!-- 安全防护脚本 -->
<script type="text/javascript">  
if (document.domain != 'soyet.icu'){  
    window.location.href='https://soyet.icu/';  
}  
</script>

<script type="text/javascript">
if (top.location != self.location) {
    top.location=self.location;
}
</script>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZWZE4LRJV"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-BZWZE4LRJV');
</script>

<!-- Bing 站长验证 -->
<meta name="msvalidate.01" content="D1F7CB79B2EDB09315F584D201268902" />

<!-- 百度统计 -->
<script>
var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "https://hm.baidu.com/hm.js?9e833dca1e39a3155b11e413c03c6431";
var s = document.getElementsByTagName("script")[0]; 
s.parentNode.insertBefore(hm, s);
})();
</script>